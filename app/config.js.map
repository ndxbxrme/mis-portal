{
  "version": 3,
  "file": "config.js",
  "sourceRoot": "../src/",
  "sources": [
    "config.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\r\n\r\n{app, BrowserWindow, Tray, Menu, ipcMain} = require 'electron'\r\npath = require 'path'\r\nsettings = require './settings'\r\nfileSystem = null\r\nwebApp = null\r\n\r\nmainWindow = null\r\nmainMenu = null\r\nctxTemplate = [\r\n  { type: 'separator' }\r\n  {\r\n    label: 'Exit MIS Portal'\r\n    click: ->\r\n      app.exit()\r\n  }\r\n]\r\nmainTemplate = [\r\n  {\r\n    label: 'File'\r\n    submenu: [\r\n      {\r\n        label: 'Auto Download'\r\n        type: 'checkbox'\r\n        checked: settings.get 'autoDownload'\r\n        click: (event) ->\r\n          settings.set 'autoDownload', not settings.get 'autoDownload'\r\n          settings.save()\r\n          Menu.setApplicationMenu mainMenu\r\n          fileSystem.init()\r\n      }\r\n      {\r\n        label: 'Auto Upload'\r\n        type: 'checkbox'\r\n        checked: settings.get 'autoUpload'\r\n        click: (event) ->\r\n          settings.set 'autoUpload', not settings.get 'autoUpload'\r\n          settings.save()\r\n          Menu.setApplicationMenu mainMenu\r\n          fileSystem.init()\r\n      }\r\n      { type: 'separator' }\r\n      {\r\n        label: 'Exit MIS Portal'\r\n        click: ->\r\n          app.exit()\r\n      }\r\n    ]\r\n  }\r\n  {\r\n    label: 'Edit'\r\n    submenu: [\r\n      { role: 'undo' }\r\n      { role: 'redo' }\r\n      { type: 'separator' }\r\n      { role: 'cut' }\r\n      { role: 'copy' }\r\n      { role: 'paste' }\r\n      { role: 'pasteandmatchstyle' }\r\n      { role: 'delete' }\r\n      { role: 'selectall' }\r\n    ]\r\n  }\r\n  {\r\n    label: 'View'\r\n    submenu: [\r\n      {\r\n        label: 'Reload'\r\n        accelerator: 'CmdOrCtrl+R'\r\n        click: (item, focusedWindow) ->\r\n          if focusedWindow\r\n            focusedWindow.reload()\r\n          return\r\n\r\n      }\r\n      { type: 'separator' }\r\n      { role: 'resetzoom' }\r\n      { role: 'zoomin' }\r\n      { role: 'zoomout' }\r\n      { type: 'separator' }\r\n      { role: 'togglefullscreen' }\r\n    ]\r\n  }\r\n  {\r\n    role: 'window'\r\n    submenu: [\r\n      { role: 'minimize' }\r\n      { role: 'close' }\r\n    ]\r\n  }\r\n  {\r\n    role: 'help'\r\n    submenu: [ {\r\n      label: 'Learn More'\r\n      click: ->\r\n        require('electron').shell.openExternal 'http://electron.atom.io'\r\n        return\r\n\r\n    } ]\r\n  }\r\n]\r\n\r\nmenus =\r\n  ctx: []\r\n  main: []\r\nclick = (event) ->\r\n  if event.group\r\n    webApp.goto 'app.view-files', groupId: event.id\r\n  else\r\n    webApp.goto event.id\r\n  mainWindow.show()\r\ntray = null\r\nmodule.exports =\r\n  setMainWindow: (window) ->\r\n    mainWindow = window\r\n  setWebApp: (_webApp) ->\r\n    webApp = _webApp\r\n  setFileSystem: (_fileSystem) ->\r\n    fileSystem = _fileSystem\r\n  setMenus: (_menus) ->\r\n    menus = _menus\r\n    @.init()\r\n  init: ->\r\n    tray = new Tray path.join __dirname, 'ctxicon.png' if not tray\r\n    myMainMenu = Object.assign [], mainTemplate\r\n    Array.prototype.splice.apply myMainMenu, [3, 0].concat(menus.main)\r\n    myCtxMenu = Object.assign [], ctxTemplate\r\n    Array.prototype.splice.apply myCtxMenu, [0, 0].concat(menus.ctx)\r\n    addClick = (menu) ->\r\n      for item, i in menu\r\n        if item.submenu or item.click or item.role or item.type\r\n          #do nothing\r\n        else\r\n          item.click = click\r\n        addClick item.submenu if item.submenu\r\n    addClick myMainMenu\r\n    addClick myCtxMenu\r\n    mainMenu = Menu.buildFromTemplate myMainMenu\r\n    contextMenu = Menu.buildFromTemplate myCtxMenu\r\n    if settings.userIsAdmin()\r\n      mainMenu.items[0].submenu.items[1].visible = false\r\n    if settings.userIsClientMaster()\r\n      mainMenu.items[0].submenu.items[0].visible = false\r\n    mainMenu.items[0].submenu.items[0].checked = settings.get 'autoDownload'\r\n    mainMenu.items[0].submenu.items[1].checked = settings.get 'autoUpload'\r\n    tray.setToolTip 'MIS Portal'\r\n    tray.setContextMenu contextMenu\r\n    tray.on 'click', ->\r\n      mainWindow.show()\r\n    Menu.setApplicationMenu mainMenu"
  ]
}